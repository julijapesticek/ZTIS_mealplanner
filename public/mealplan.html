<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
    <title>Meal Planner</title>
</head>

<body>

    <div class="navbar">
        <ul>
            <input type="image" src="img/moon-btn.png" id="toggle-dark-mode" width="20" height="20" margin-right="10px" class="gumb">
            <li><a href="homepage.html">Home</a></li>
            <li><a href="#">Meal Plan</a></li>
            <button id="logoutButton" class="button">Logout</button>
        </ul>
    </div>

    <h1>Meal Planner</h1>

    <div>
        <div id="mealPlan">
            <div class="day">
                <h3>Monday</h3>
                <ul class="recipe-list" id="monday"></ul>
            </div>

            <div class="day">
                <h3>Tuesday</h3>
                <ul class="recipe-list" id="tuesday"></ul>
            </div>

            <div class="day">
                <h3>Wednesday</h3>
                <ul class="recipe-list" id="wednesday"></ul>
            </div>

            <div class="day">
                <h3>Thursday</h3>
                <ul class="recipe-list" id="thursday"></ul>
            </div>

            <div class="day">
                <h3>Friday</h3>
                <ul class="recipe-list" id="friday"></ul>
            </div>

            <div class="day">
                <h3>Saturday</h3>
                <ul class="recipe-list" id="saturday"></ul>
            </div>

            <div class="day">
                <h3>Sunday</h3>
                <ul class="recipe-list" id="sunday"></ul>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('toggle-dark-mode').addEventListener('click', async () => {
        const isDarkMode = await window.darkMode.toggle();
        })
    
        document.addEventListener('DOMContentLoaded', () => {
            const accessToken = window.localStorage.getItem('accessToken');
            const refreshToken = window.localStorage.getItem('refreshToken');

            console.log(accessToken, refreshToken);

            if (!accessToken || !refreshToken) {
                window.location.href = 'login.html';
            }
            // else {
                
            // }
        // LOGOUT
        const logoutButton = document.getElementById('logoutButton');

        logoutButton.addEventListener('click', async () => {
            const response = await fetch('http://localhost:3001/users/logout', {
                method: 'POST',
            });

            if (response.ok) {
                alert('Logout successful');
                // Redirect to the login page or any other desired page
                window.location.href = 'login.html';
            } else {
                const data = await response.json();
                alert(data.error);
            }
        });
        
    });

    </script>
</body>

</html>
