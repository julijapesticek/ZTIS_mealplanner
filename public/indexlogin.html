<!-- <div *ngFor="let item of individual_endpoints" class="meni">
    <div class="meni-objekt1">
        Name : {{ item.name }}
        <br/>
        Number Of Calls: {{ item.numberOfCalls }}
    </div>
</div>

<div class="meni">
    <div class="meni-objekt2">
        Name : {{ last_called_endpoint.name }}
        <br/>
        Number Of Calls: {{ last_called_endpoint.numberOfCalls }}
    </div>
</div>

<div class="meni">
    <div class="meni-objekt3">
        Name : {{ most_called_endpoint.name }}
        <br/>
        Number Of Calls: {{ most_called_endpoint.numberOfCalls }}
    </div>
</div> -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>

<body>
    <h1>Login</h1>

    <form id="loginForm">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br>

        <input type="submit" value="Login">
    </form>

    <h1>Register</h1>

    <form id="registerForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br>

        <label for="surname">Surname:</label>
        <input type="text" id="surname" name="surname" required><br>

        <label for="gender">Gender:</label>
        <select id="gender" name="gender" required>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
        </select><br>

        <label for="height">Height (cm):</label>
        <input type="number" id="height" name="height" required><br>

        <label for="weight">Weight (kg):</label>
        <input type="number" id="weight" name="weight" required><br>
        
        <label for="registerEmail">Email:</label>
        <input type="email" id="registerEmail" name="email" required><br>

        <label for="registerPassword">Password:</label>
        <input type="password" id="registerPassword" name="password" required><br>

        <input type="submit" value="Register">
    </form>

    <script>
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');

        loginForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            const response = await fetch('http://localhost:3001/users/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, password })
            });

            const data = await response.json();
            console.log(data);
            if (response.ok) {
                alert('Login successful');
                window.location.href = 'homepage.html'; // redirect to homepage
            } else {
                alert(data.error);
            }
        });


        registerForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const surname = document.getElementById('surname').value;
            const gender = document.getElementById('gender').value;
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;

            const response = await fetch('http://localhost:3001/users/addUser', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, surname, gender, height, weight, email, password })
            });

            const data = await response.json();
            console.log(data);
            if (response.ok) {
                alert('Registration successful');
                window.location.href = 'homepage.html'; // redirect to homepage
            } else {
                alert(data.msg);
            }
        });
    </script>
</body>

</html>
